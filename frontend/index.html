
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SyncPiano v0.5.5</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div id="app">
    <nav id="tool">
      <div class="group"><div class="gtitle" data-i18n="filesGroup">ファイル</div>
        <button class="tool active" data-panel="files" title="Files">🗎</button>
        <button class="tool" data-panel="media" title="Media">🎞</button>
      </div>
      <div class="group"><div class="gtitle" data-i18n="effectsGroup">エフェクト</div>
        <button class="tool" data-panel="effects" title="Effects">✨</button>
        <button class="tool" data-panel="particles" title="Particles">⋯</button>
        <button class="tool" data-panel="lights" title="Lights">💡</button>
      </div>
      <div class="group"><div class="gtitle" data-i18n="keysGroup">鍵盤</div>
        <button class="tool" data-panel="keys" title="Keys">🎹</button>
      </div>
      <div class="group"><div class="gtitle" data-i18n="bgRenderGroup">背景/出力</div>
        <button class="tool" data-panel="bg" title="Background">🖼</button>
        <button class="tool" data-panel="render" title="Render">📦</button>
      </div>
      <div class="group"><div class="gtitle" data-i18n="modeGroup">モード</div>
        <button id="toggleMode" class="tool" title="Simple/Advanced">🥽</button>
      </div>
    </nav>

    <aside id="left" class="glass">
      <div id="panel-files" class="panel active">
        <button id="btnImport" class="import" data-i18n="importBtn">ファイルをインポート</button>
        <input id="filePicker" type="file" multiple accept=".mid,.midi" style="display:none">
        <h4 data-i18n="recent">最近使ったファイル</h4><div id="recentList" class="recent"></div>
        <h4 data-i18n="library">ライブラリ</h4><div id="fileGrid" class="library"></div>
        <p class="hint" data-i18n="dragHint">ライブラリからタイムラインにドラッグ＆ドロップで配置できます。</p>
      </div>

      <div id="panel-effects" class="panel">
        <h3 data-i18n="colorPresets">色プリセット</h3>
        <div class="presets">
          <button class="preset glass-button" data-a="#ffffff" data-b="#ededed">Mono</button>
          <button class="preset glass-button" data-a="#ff3b30" data-b="#ffd60a">Neon</button>
          <button class="preset glass-button" data-a="#ff9966" data-b="#ff5e62">Warm</button>
          <button class="preset glass-button" data-a="#00f5d4" data-b="#9b5de5">Candy</button>
        </div>
      </div>

      <div id="panel-particles" class="panel"><h3 data-i18n="particles">パーティクル</h3><label class="switch"><input type="checkbox" id="toggleParticles" checked> <span data-i18n="enable">有効化</span></label></div>
      <div id="panel-lights" class="panel"><h3 data-i18n="lights">ライト</h3><label class="switch"><input type="checkbox" id="toggleGlare" checked> <span data-i18n="glare">グレア</span></label></div>
      <div id="panel-keys" class="panel">
        <h3 data-i18n="keysPanel">鍵盤</h3>
        <div class="row"><label><span data-i18n="primary">メイン</span> <input type="color" id="colorA" value="#ff3b30"></label></div>
        <div class="row"><label><span data-i18n="secondary">サブ</span> <input type="color" id="colorB" value="#ffd60a"></label></div>
      </div>
      <div id="panel-bg" class="panel"><h3 data-i18n="background">背景</h3><div class="row">（将来：背景画像/映像の設定）</div></div>
      <div id="panel-media" class="panel"><h3 data-i18n="media">メディア</h3><div class="row">（将来：音源・動画管理）</div></div>

      <div id="panel-render" class="panel">
        <h3 data-i18n="render">書き出し</h3>
        <div class="row"><button id="btnPickDir" class="glass-button" data-i18n="chooseDir">保存先を選択</button><span id="saveDir"></span></div>
        <div class="row">
          <label><span data-i18n="format">形式</span>
            <select id="fmt" class="select glass">
              <option value="mp4">mp4 (H.264)</option>
              <option value="webm">webm (VP9)</option>
            </select>
          </label>
        </div>
        <div class="row">
          <label><span data-i18n="resolution">解像度</span>
            <select id="res" class="select glass">
              <option value="1280x720">HD (1280x720)</option>
              <option value="1920x1080" selected>FHD (1920x1080)</option>
              <option value="2560x1440">WQHD (2560x1440)</option>
              <option value="3840x2160">UHD (3840x2160)</option>
            </select>
          </label>
        </div>
        <div class="row">
          <label><span data-i18n="fps">フレームレート</span>
            <select id="fps" class="select glass">
              <option>24</option><option>30</option><option selected>60</option><option>120</option><option>240</option>
            </select>
          </label>
        </div>
        <div class="row"><input id="outName" class="glass-input" placeholder="ファイル名" value="syncpiano_export"></div>
        <div class="row"><button id="btnExport" class="primary-button" data-i18n="export">書き出し</button></div>
        <div id="exportStatus"></div>
      </div>
    </aside>

    <main id="center" class="glass">
      <div id="previewFrame">
        <canvas id="preview"></canvas>
        <div id="zoomHud">100%</div>
      </div>

      <div id="transport">
        <div class="rate">
          <button class="rateBtn glass-button" data-r="0.5">0.5x</button>
          <button class="rateBtn glass-button active" data-r="1">1x</button>
          <button class="rateBtn glass-button" data-r="1.5">1.5x</button>
          <button class="rateBtn glass-button" data-r="2">2x</button>
        </div>
        <button id="btnBack" class="glass-button">«</button><button id="btnPlay" class="primary-button" title="Play/Pause">▶</button><button id="btnFwd" class="glass-button">»</button>
        <div id="timeText">00:00.00 / 00:00.00</div><div id="spacer"></div>
        <select id="lang" class="select glass">
          <option value="ja" selected>日本語</option><option value="en">English</option>
        </select>
      </div>

      <section id="timeline" class="droptarget">
        <div id="ticks"></div>
        <div id="tracks">
          <div class="track" data-kind="midi"><div class="label">MIDI</div><div class="slot droptarget" id="slot-midi" data-i18n="dropMidi">ここにMIDIをドロップ</div></div>
          <div class="track" data-kind="audio"><div class="label">Audio</div><div class="slot droptarget" id="slot-audio" data-i18n="dropAudio">ここにオーディオをドロップ</div></div>
          <div class="track" data-kind="video"><div class="label">Video</div><div class="slot droptarget" id="slot-video" data-i18n="dropVideo">ここに動画をドロップ</div></div>
        </div>
        <div id="playhead"><div class="handle"></div></div>
      </section>
    </main>
  </div>

  <script src="qrc:/qtwebchannel/qwebchannel.js"></script>
  <script type="module" src="./js/bridge.js"></script>
  <script type="module" src="./js/i18n.js"></script>
  <script type="module" src="./js/piano_layout.js"></script>
  <script type="module" src="./js/render.js"></script>
  <script type="module" src="./js/midi.js"></script>
  <script type="module" src="./js/files.js"></script>
  <script type="module" src="./js/timeline.js"></script>
  <script type="module" src="./js/ui.js"></script>
  <script type="module" src="js/transport.js"></script>
</body>
</html>
